<html>
<head>
	<meta charset="utf-8" />
	<meta name="generator" content="R package animation 2.6">
	<title>Multiple Realization Animation with Tails</title>
	<link rel="stylesheet" href="css/reset.css" />
	<link rel="stylesheet" href="css/styles.css" />
	<link rel="stylesheet" href="css/scianimator.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/github.min.css">

	<script src="js/jquery-1.4.4.min.js"></script>
	<script src="js/jquery.scianimator.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/languages/r.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

	<div class="scianimator"><div id="multi_proj_plot_tail" style="display: inline-block;"></div></div>
	<div class="scianimator" style="width: 480px; text-align: left"><pre><code class="r">## Plot of Animal with Multiple Realizations
library(data.table)
library(animation)
library(lubridate)
library(rgdal)
library(sp)
library(magrittr)
library(forcats)
library(stringr)
library(dplyr)
library(purrr)
library(readr)
library(tidyr)
library(tibble)
library(ggplot2)
library(tidyverse)
library(crawl)
par(mar = c(4.1, 4.1, 0.1, 0.1))
for (current_time in seq_along(all_dates)) {
    tail_len <- 2
    if (current_time < tail_len) {
        days_before <- current_time
    }
    else {
        days_before <- current_time - tail_len
    }
    df <- predObj_sub %>% filter(date %in% (all_dates[days_before:current_time]))
    df_today <- df %>% filter(date == all_dates[[current_time]])
    p <- ggplot() + geom_smooth(data = df, aes(x = mu.x, 
        y = mu.y, group = key, colour = key), method = "loess", 
        formula = y ~ x, se = FALSE, alpha = 0.6, size = 0.5) + 
        geom_point(data = df_today, aes(x = mu.x, y = mu.y, 
            colour = key), alpha = 0.6, size = 1) + labs(title = all_dates[[current_time]]) + 
        xlim(c(-2e+05, 2350000)) + ylim(c(-610000, 610000)) + 
        theme_map() + scale_colour_manual(values = cols) + 
        theme(legend.position = "none")
    print(p)
    ani.pause()
}
## R version 3.6.2 (2019-12-12)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Other packages: data.table 1.13.0, animation 2.6, lubridate 1.7.9, rgdal 1.5-19, sp 1.4-2, magrittr
## 1.5, forcats 0.5.0, stringr 1.4.0, dplyr 1.0.2, purrr 0.3.4, readr 1.3.1, tidyr 1.1.2, tibble 3.0.3,
## ggplot2 3.3.2, tidyverse 1.3.0, crawl 2.2.1</code></pre></div>
	<script src="js/multi_proj_plot_tail.js"></script>
<!-- highlight R code -->

</body>
</html>
